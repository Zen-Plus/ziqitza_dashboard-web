import React from 'react';
import { PropTypes } from 'prop-types';
import { mapDistrictPath } from './utils';
import withDistrictMapProvider from './withDistrictMapProvider';


function DistrictMap({ handleDistrictOnClick, filterObj, userAssignedDistricts }) {
  const selectedDistrict = (filterObj && filterObj.district) || {};

  function handleDistrictSelect(district) {
    if (district.id === selectedDistrict.id) {
      handleDistrictOnClick({});
      return;
    }
    handleDistrictOnClick(district);
  }

  const svgPaths = userAssignedDistricts && userAssignedDistricts.map((item) => {
    if (mapDistrictPath[item.code]) {
      return mapDistrictPath[item.code].path(selectedDistrict.id === item.id ? 'Selected' : '', () => { handleDistrictSelect(item); }, item.name);
    }
    return <></>;
  });


  return (
    <>
      <div className="DistrictMap Flex BorderRadius--Base BG--White JustifyContent--Center Align-Items-Center  Width-Full Height-Full" style={{ position: 'relative', padding: 20 }}>
        <svg viewBox="0 0 1858 2466" xmlns="http://www.w3.org/2000/svg" version="1.1">
          <g>
            <path fill="#000000" id="Fill-20" d="m361.409,29.414l0,49.341l19.211,0c13.84,0 23.09,-0.908 27.76,-2.728c4.66,-1.818 8.32,-4.665 10.97,-8.54c2.65,-3.873 3.97,-8.38 3.97,-13.521c0,-6.325 -1.86,-11.544 -5.57,-15.656c-3.72,-4.111 -8.42,-6.681 -14.12,-7.709c-4.19,-0.79 -12.61,-1.187 -25.26,-1.187l-16.961,0zm-35.108,144.464l0,-173.878l56.339,0c21.35,0 35.27,0.871 41.75,2.609c9.96,2.609 18.3,8.284 25.03,17.02c6.72,8.738 10.08,20.026 10.08,33.863c0,10.675 -1.94,19.65 -5.81,26.924c-3.88,7.275 -8.8,12.987 -14.77,17.138c-5.97,4.152 -12.04,6.9 -18.21,8.244c-8.38,1.66 -20.52,2.491 -36.41,2.491l-22.891,0l0,65.589l-35.108,0l0,0z" />
            <path fill="#000000" id="Fill-21" d="m488.08,0l35.11,0l0,94.174c0,14.945 0.43,24.632 1.3,29.059c1.51,7.117 5.08,12.83 10.74,17.139c5.65,4.311 13.38,6.464 23.19,6.464c9.96,0 17.47,-2.035 22.53,-6.108c5.06,-4.072 8.11,-9.074 9.13,-15.004c1.03,-5.931 1.55,-15.775 1.55,-29.534l0,-96.19l35.1,0l0,91.328c0,20.875 -0.94,35.623 -2.84,44.24c-1.9,8.62 -5.4,15.893 -10.5,21.824c-5.1,5.93 -11.92,10.656 -20.46,14.173c-8.54,3.518 -19.69,5.279 -33.45,5.279c-16.6,0 -29.19,-1.919 -37.77,-5.753c-8.58,-3.834 -15.36,-8.816 -20.34,-14.945c-4.99,-6.126 -8.27,-12.551 -9.85,-19.273c-2.29,-9.963 -3.44,-24.67 -3.44,-44.122l0,-92.751" />
            <polyline points="664.0999755859375,173.87799090576172 664.0999755859375,1.8310547034161573e-7 698.25,1.8310547034161573e-7 769.4200439453125,116.11699694824219 769.4200439453125,1.8310547034161573e-7 802.0400390625,1.8310547034161573e-7 802.0400390625,173.87799090576172 766.81005859375,173.87799090576172 696.7099609375,60.48900622558594 696.7099609375,173.87799090576172 664.0999755859375,173.87799090576172 " fill="#000000" id="Fill-22" />
            <path fill="#000000" id="Fill-23" d="m901.9,0l34.99,0l0,110.067c0,14.393 -1.26,25.462 -3.79,33.211c-3.4,10.122 -9.57,18.247 -18.5,24.373c-8.94,6.129 -20.72,9.193 -35.35,9.193c-17.16,0 -30.36,-4.804 -39.62,-14.411c-9.25,-9.607 -13.91,-23.702 -13.99,-42.284l33.09,-3.795c0.4,9.963 1.86,17.001 4.39,21.112c3.8,6.247 9.57,9.37 17.32,9.37c7.82,0 13.36,-2.233 16.6,-6.701c3.24,-4.467 4.86,-13.739 4.86,-27.814l0,-112.321" />
            <path fill="#000000" id="Fill-24" d="m1066.41,105.086l-23.96,-64.523l-23.48,64.523l47.44,0zm64.64,68.792l-38.19,0l-15.18,-39.496l-69.5,0l-14.35,39.496l-37.25,0l67.73,-173.878l37.12,0l69.62,173.878l0,0z" />
            <path fill="#000000" id="Fill-25" d="m1184.9,98.088l0,46.495l32.5,0c12.65,0 20.68,-0.356 24.08,-1.068c5.22,-0.949 9.47,-3.262 12.75,-6.939c3.28,-3.677 4.92,-8.599 4.92,-14.766c0,-5.219 -1.27,-9.646 -3.8,-13.285c-2.53,-3.635 -6.18,-6.286 -10.97,-7.946c-4.78,-1.661 -15.16,-2.491 -31.13,-2.491l-28.35,0zm0,-69.148l0,40.208l23.01,0c13.68,0 22.18,-0.197 25.5,-0.593c6.01,-0.712 10.74,-2.787 14.18,-6.227c3.44,-3.44 5.16,-7.965 5.16,-13.58c0,-5.377 -1.49,-9.745 -4.45,-13.107c-2.97,-3.36 -7.38,-5.396 -13.23,-6.108c-3.48,-0.395 -13.48,-0.593 -30,-0.593l-20.17,0zm-35.11,-28.94l69.51,0c13.76,0 24.02,0.574 30.78,1.719c6.76,1.148 12.81,3.54 18.14,7.176c5.34,3.638 9.79,8.48 13.35,14.53c3.56,6.049 5.33,12.829 5.33,20.341c0,8.145 -2.19,15.617 -6.58,22.417c-4.39,6.801 -10.34,11.901 -17.85,15.3c10.6,3.084 18.74,8.343 24.43,15.775c5.7,7.433 8.54,16.171 8.54,26.212c0,7.908 -1.83,15.597 -5.51,23.07c-3.68,7.472 -8.7,13.443 -15.06,17.909c-6.37,4.468 -14.22,7.217 -23.55,8.243c-5.85,0.634 -19.96,1.029 -42.34,1.186l-59.19,0l0,-173.878l0,0z" />
            <g id="Group">
              {svgPaths}
            </g>
          </g>
        </svg>
      </div>
    </>
  );
}

DistrictMap.defaultProps = {
  userAssignedDistricts: [],
};

DistrictMap.propTypes = {
  handleDistrictOnClick: PropTypes.func.isRequired,
  filterObj: PropTypes.object.isRequired,
  userAssignedDistricts: PropTypes.array,
};
export default withDistrictMapProvider(DistrictMap);
